<!DOCTYPE html>
@using System.Globalization;
@using Arad.Portal.GeneralLibrary.Utilities;
@using Microsoft.AspNetCore.Http;
@{
    var direction = "";
    var ulNavbarLinkClass = "";
    var bellCls = "";
    var faCls = "";
    var floatlr = "";
    var langList = new List<string>() { "fa", "en" };
    string lang = "";
    string userName = _accessor.HttpContext?.User.GetUserName();

    if (CultureInfo.CurrentCulture.TextInfo.IsRightToLeft)
    {
        direction = "rtl";

        ViewBag.dir = "rtl";
        ulNavbarLinkClass = "navbar-nav mr-auto";
        floatlr = "float-sm-left";
        bellCls = "fa fa-bell-o";
        faCls = "fa";
    }
    else
    {
        direction = "ltr";
        ViewBag.dir = "ltr";
        ulNavbarLinkClass = "navbar-nav ml-auto";
        floatlr = "float-sm-right";
        bellCls = "far fa-bell";
        faCls = "fas";
    }

    switch (CultureInfo.CurrentCulture.Name)
    {
        case "fa-IR":
            lang = "fa";
            break;
        case "en-US":
            lang = "en";
            break;
    }

}
@inject IHttpContextAccessor _accessor

<html dir="@direction" lang="@lang">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta content="Arad Portal" name="description">
    <title>@ViewData["Title"] - Arad.Portal.UI.Dashboard</title>


    @if (direction == "ltr")
    {
        <link href="~/lib/bootstrap5/css/bootstrap.min.css" rel="stylesheet" />
        @*<link href="~/plugins/icheck-bootstrap/icheck-bootstrap.css" rel="stylesheet" />*@
    }
    else
    {
        <link href="~/lib/bootstrap5/css/bootstrap.rtl.min.css" rel="stylesheet" />
        <link href="~/Fonts/IranSans/css/fontiran.css" rel="stylesheet" />
        @*<link href="~/fonts/IranSans/css/persianfonts.css" rel="stylesheet" />
            <link href="~/plugins/iCheck/all.css" rel="stylesheet" />
            <link href="~/plugins/iCheck/flat/blue.css" rel="stylesheet" />
            <link href="~/css/siteTemplate/rtl/custom-style.css" rel="stylesheet" />
            <link href="~/lib/limonte-sweetalert2/sweetalert2.min.css" rel="stylesheet" />
            <link href="~/css/persian-datepicker.min.css" rel="stylesheet" />*@
    }

    @*<link href="~/lib/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet" />*@
    <link href="~/css/site.css" rel="stylesheet" />
    <link href="~/lib/font-awesome/css/all.css" rel="stylesheet" />
    @*<link href="~/css/siteTemplate/shared/AdminLTE/adminlte.css" rel="stylesheet" />*@

    @*<link href="~/css/siteTemplate/shared/fontawesome-free/all.min.css" rel="stylesheet"/>
          <!-- overlayScrollbars -->
        <link rel="stylesheet" href="~/lib//overlayscrollbars/css/OverlayScrollbars.min.css" />*@

    @await RenderSectionAsync("Styles", required: false)

    @*<script src="~/lib/jquery/dist/jquery.min.js"></script>
        @if (direction == "rtl")
        {
            <script src="~/js/siteTemplate/jqueryui1.11.4/jquery-ui.min.js"></script>
        }

        <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>*@



    @*<script src="~/js/site.js" asp-append-version="true"></script>
        <script src="~/lib/limonte-sweetalert2/sweetalert2.all.min.js"></script>


        <style>
            .lanFlag {
                cursor: pointer;
            }
        </style>
        @await RenderSectionAsync("Scripts", required: false);*@
</head>
<body class="fs-6">
    <header class="navbar navbar-light shadow navbar-expand flex-md-nowrap p-0 m-0">
        <div class="container-fluid">
            <div class="navbar-brand col-md-3 me-0">
                <img alt="" class="navbar-logo" height="50" src="/images/Logo.png" width="50" />
                @Language.GetString("Menu_Dashboard_HomeTitle")
            </div>
            <div class="w-100 text-center fw-semibold" dir="ltr" id="dateTime"></div>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a aria-expanded="false" class="nav-link dropdown-toggle fw-bold" data-bs-toggle="dropdown" href="#" id="navbarDropdownMenuLink" role="button">
                            @userName
                        </a>
                        <ul aria-labelledby="navbarDropdownMenuLink" class="dropdown-menu">
                            <li>
                                <a class="dropdown-item" asp-action="ChangePassword" asp-controller="Account">
                                    <i class="fas fa-key"></i>
                                    @Language.GetString("ChangePassword")
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" asp-action="Profile" asp-controller="Account">
                                    <i class="far fa-id-badge"></i>
                                    @Language.GetString("Menu_Profile")
                                </a>
                            </li>
                            @*<li><hr class="dropdown-divider"></li>
                                <li class="nav-item">
                                    <a class="nav-link lanFlag">
                                        <img src="/imgs/IRAN.png" onclick="setLang('fa-IR')" />
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link lanFlag">
                                        <img src="/imgs/USA.png" onclick="setLang('en-US')" />
                                    </a>
                                </li>*@
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item" asp-action="Logout" asp-controller="Account">
                                    <i class="fas fa-sign-out-alt"></i>
                                    @Language.GetString("btn_Exit")
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <button aria-controls="bd-docs-nav" aria-expanded="false" aria-label="Toggle docs navigation" class="nav-link btn bg-gradient btn-sm btn-outline-success d-md-flex px-3 ms-3 collapsed" data-bs-target="#bd-docs-nav" data-bs-toggle="collapse" type="button">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </header>

    <div class="container-fluid mt-2">
        <div class="row h-100">
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar shadow collapse shadow-lg" id="bd-docs-nav">
                @await Component.InvokeAsync("SidebarMenu")
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 pt-2 flex-grow-1" id="mainContent">
                @RenderBody()
            </main>
        </div>
    </div>
    @if (ViewBag.OperationResult != null)
    {
        @await Component.InvokeAsync("Notification", ViewBag.OperationResult);
    }


    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap5/js/bootstrap.bundle.js"></script>


    @*<script src="~/js/siteTemplate/Adminlte/adminlte.js"></script>*@
    @*<script src="~/js/site.js" asp-append-version="true"></script>*@
    @await RenderSectionAsync("Scripts", required: false)

    <script>
        adjustSidebar();
        $(document).ready(function () {
            debugger;
        $("#deleteToast").hide();
        $("#notificationToast").hide();
    });


	window.addEventListener('resize', adjustSidebar);
	window.addEventListener('load',
		() =>
		{
			setInterval(function()
				{
					const dateTime = new Date();
					const date = dateTime.toLocaleDateString('@CultureInfo.CurrentCulture.Name') + ' <br/> ' + dateTime.toLocaleTimeString('@CultureInfo.CurrentCulture.Name');
					$("#dateTime").html(date);
				},
				1000);
		});
	function adjustSidebar()
	{
		var side;
		side = document.getElementById('bd-docs-nav');
		if (window.innerWidth >= 576)
		{
			if (!side.classList.contains("show"))
			{
				side.classList.add('show');
			}
		}
		else
		{
			side = document.getElementById('bd-docs-nav');
			if (side.classList.contains("show"))
			{
				side.classList.remove("show");
			}
		}
	}
	function GetDecoded(stringInput)
	{
		var map = { "gt": ">", "&quot;": "\"", "lt": "<", "quot": "\"" /* , … */ };
		return stringInput.replace(/&(#(?:x[0-9a-f]+|\d+)|[a-z]+);?/gi,
			function($0, $1)
			{
				if ($1[0] === "#")
				{
					return String.fromCharCode($1[1].toLowerCase() === "x" ? parseInt($1.substr(2), 16) : parseInt($1.substr(1), 10));
				}
				else
				{
					return map.hasOwnProperty($1) ? map[$1] : $0;
				}
			});
	};
    function setLang(lang) {
        var currentCulture = '@CultureInfo.CurrentCulture.Name';
        if (currentCulture !== lang) {
            $.ajax({
                type: "GET",
                url: '/Account/changeLang?langId=' + lang,
                success: function () {
                    debugger;
                    window.location.reload();
                }
            });
        }
    }
    function getLoadingClass() {
            if ("@direction" == "rtl") {
            cls = "fa fa-refresh fa-spin";
        } else {
                cls = "fas fa-2x fa-sync-alt";
        }
        return cls;
    }
    function AddLoading(cardElement) {
        var cls = getLoadingClass();
        $(cardElement).append("<div class='overlay'>" +
            "<i class='" + cls + "'></i></div>");
    }
    function removeLoading(cardElement) {
        $(cardElement).find(".overlay").remove();
    }
    </script>

</body>
</html>



